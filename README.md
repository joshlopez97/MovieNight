# MovieNight
MovieNight is a web application for browsing and buying movies. The application consists of a [frontend](https://movienight.dev) and four different RESTful microservices: an IDM service, inventory service, billing service, and API gateway. All five of these components are built using Java, Gradle, Jackson, and Jersey. The service is deployed via NGINX for display purposes only at https://movienight.dev. This application is fully functioning, but is only built for demonstrative purposes.
## Gateway Service
This service is responsible for load-balancing all client requests across multiple worker threads which continuously schedule HTTPS requests to all the endpoints in the other 3 services (with the exception of session validation in the IDM service). Aside from that exception, the endpoints in the other services must be reached through the gateway by prepending /g/ to the path of the endpoint they intend to reach. Here's an example:
- Frontend makes call to `$GATEWAY_URL/g/movies/search?genre='action'` to reach the movie search endpoint
- The Gateway receives the request and inserts a new request in the gateway db, a 204 No Content response is returned to the client with a transaction ID in the header to follow-up with
- In the background, once a worker thread becomes available, the request will be popped from the database and executed to the appropriate service
- That service will return a response which will be stored in the gateway db along with the matching transaction ID
- The client will make a request to `/g/report` with the transaction ID in the header. This endpoint will return the response associated with that ID if found in the database, otherwise a 204 is again returned along with a time to wait before making another request
## IDM Service
This service is responsible for handling user information and authentication. There are endpoints for registering a new user, logging in, and user session management. Sessions are each given a unique ID that times out if a user is not active within a time window and expires automatically after a set period of time (all configured in IDM config.yaml). Session IDs are critical for authenticating requests in other servies.
## Inventory Service
This service is responsible for serving requests for movie, genre, and actor data. The search endpoints can include a multitude of query paremeters to use for fetching movies/stars from the mySQL database. There are also privileges admin endpoints for adding and removing stars/movies/genres from the database. All endpoints are required to have a valid Session ID and email in their request, which is validated by the IDM service.
## Billing Service
This service is responsible for handling shopping cart data, customer billing information, and checking out. Users can add movies with to their shopping carts, update item quantities, create or change billing info, and checkout, which uses PayPal's API to redirect to the PayPal Sandbox where a user would actually submit their payment (since this is a demo, there is no actual pyament processing). All endpoints are required to have a valid Session ID and email in their request, which is validated by the IDM service.
